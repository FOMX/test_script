---
- hosts: all
  become: yes
  
  tasks:
  - name: Print variables from cli
    ansible.builtin.debug:
      msg: "load: {{ load }}"

  - name: Ensure git is installed
    ansible.builtin.apt:
      name: git
      state: present

  - name: Clone sometags repo
    ansible.builtin.git: 
      repo: https://github.com/FOMX/just_some_tags.git
      dest: /tmp/checkout
      version: "{{ load }}"

  - name: Ensure chrony (for time synchronization) is installed.
    ansible.builtin.apt:
      name: chrony
      state: present

  - name: Ensure chrony is running.
    service:
      name: chronyd
      state: started
      enabled: yes
  